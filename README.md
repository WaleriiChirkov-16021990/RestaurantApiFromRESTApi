# Create table Person
CREATE TABLE Person
(
id            int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
name          VARCHAR(100)                       NOT NULL,
lastname      VARCHAR(130)                       NOT NULL,
year_of_birth int check ( year_of_birth > 1900 ) NOT NULL,
phone_number  VARCHAR(30)                        NOT NULL UNIQUE,
email         VARCHAR(100)                       NOT NULL UNIQUE,
password      VARCHAR                            NOT NULL
);


#### Helpers command

* DROP TABLE Person;

* select *
from Person;

* select *
from foodreview;

* DROP TABLE FoodReview;

# Create table FoodReview
CREATE TABLE FoodReview
(
id         int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
person_id  int NOT NULL REFERENCES Person (id)  ON DELETE CASCADE ,
dateCreate TIMESTAMP,
grade      int NOT NULL CHECK ( grade >= 0 ) CHECK ( grade < 6 ),
comment    VARCHAR DEFAULT 'this default comment'
);

# Insert data from table Users
INSERT INTO Person(name, lastname, year_of_birth, phone_number, email, password)
VALUES ('Kazimir', 'Malevitch', 1935, '89000000001', 'malevitch@mail.ru', 'kazimir');
INSERT INTO Person(name, lastname, year_of_birth, phone_number, email, password)
VALUES ('Vladimir', 'Mayakovskiy', 1930, '8901000002', 'mayakovskiy@mail.ru', 'vladimir');
INSERT INTO Person(name, lastname, year_of_birth, phone_number, email, password)
VALUES ('Iosif', 'Stalin', 1953, '8901000000', 'stal@mail.ru', 'iosif');
INSERT INTO Person(name, lastname, year_of_birth, phone_number, email, password)
VALUES ('Anatoliy', 'Vasserman', 1952, '8901000003', 'vasser@mail.ru', 'anatoliy');

# Insert data from table FoodReviews
FoodReviews relation for Users in ManyToOne relationships ** 


INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-09-09 23:19:57.017953', 4, 4, 'Good service, good prices');
INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-05-09 13:19:57.017954', 4, 4, 'tasty food');
INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-08-09 20:19:57.017955', 4, 4, 'Delicious dishes');
INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-07-09 03:19:57.017956', 4, 1, 'Ass');
INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-07-09 03:19:57.017956', 3, 1, 'Ass and fail');
INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-07-09 03:19:57.017956', 2, 5, 'Good');
INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
VALUES ('2023-07-09 03:19:57.017956', 1, 5, 'Good food');


# ==========================

CREATE TABLE Person
(
person_id            int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
person_name          VARCHAR(100)                              NOT NULL,
person_lastname      VARCHAR(130)                              NOT NULL,
person_year_of_birth int check ( person_year_of_birth > 1900 ) NOT NULL,
person_phone_number  VARCHAR(30)                               NOT NULL UNIQUE,
person_email         VARCHAR(100)                              NOT NULL UNIQUE,
person_username      VARCHAR                                   NOT NULL ,
person_password      VARCHAR                                   NOT NULL,
person_created_at    timestamp,
person_updated_at    timestamp,
person_updated_who   VARCHAR(100)                              NOT NULL
);

DROP TABLE Person cascade;
-- DROP TABLE users;

select *
from Person;

TRUNCATE TABLE person;
-- DELETE FROM person;

-- select *
-- from foodreview;

-- DROP TABLE FoodReview;


-- CREATE TABLE FoodReview
-- (
--     id         int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
--     person_id  int NOT NULL REFERENCES Person (id) ON DELETE CASCADE,
--     dateCreate TIMESTAMP,
--     grade      int NOT NULL CHECK ( grade >= 0 ) CHECK ( grade < 6 ),
--     comment    VARCHAR DEFAULT 'this default comment'
-- );


INSERT INTO Person(person_name, person_lastname, person_year_of_birth, person_phone_number, person_email,
person_username,person_password, person_updated_who)
VALUES ('Vladimir', 'Mayakovskiy', 1930, '8901000002', 'mayakovskiy@mail.ru', 'vladimir', 'vladimir', 'John Conor');
INSERT INTO Person(person_name, person_lastname, person_year_of_birth, person_phone_number, person_email,
person_username,person_password, person_updated_who)
VALUES ('Iosif', 'Stalin', 1953, '8901000000', 'stal@mail.ru', 'iosif','iosif', 'John Conor');
INSERT INTO Person(person_name, person_lastname, person_year_of_birth, person_phone_number, person_email,
person_username,person_password, person_updated_who)
VALUES ('Anatoliy', 'Vasserman', 1952, '8901000003', 'vasser@mail.ru', 'anatoliy','anatoliy','John Conor');
INSERT INTO Person(person_name, person_lastname, person_year_of_birth, person_phone_number, person_email,
person_username,person_password, person_updated_who)
VALUES ('Kazimir', 'Malevitch', 1935, '89000000001', 'malevitch@mail.ru', 'kazimir','kazimir', 'John Conor');

--
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-09-09 23:19:57.017953', 4, 4, 'Good service, good prices');
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-05-09 13:19:57.017954', 4, 4, 'tasty food');
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-08-09 20:19:57.017955', 4, 4, 'Delicious dishes');
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-07-09 03:19:57.017956', 4, 1, 'Ass');
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-07-09 03:19:57.017956', 3, 1, 'Ass');
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-07-09 03:19:57.017956', 2, 5, 'Good');
-- INSERT INTO FoodReview(dateCreate, person_id, grade, comment)
-- VALUES ('2023-07-09 03:19:57.017956', 1, 5, 'Good food');

# =======================
sale laptop
